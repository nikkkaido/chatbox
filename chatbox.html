<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <title>chatbox</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>
        function scrollToBottom() {
            window.scrollTo(0, document.body.scrollHeight);
        }
    </script>

  </head>

  <body onload="scrollToBottom()" style="margin-top: 5px; margin-bottom: 5px;">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <div id="test" onload="loadREST()" class="cont1">

        
        <!--<div class="row1">
            <div class="colu1">
                <p>35:01</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #6B609F">ZeRo466</span>: 
                    TV show
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #EDE95B">RickStar2013</span>:
                    who
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C26859">lostarkinmewhen</span>: 
                    MESS EYE
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #8B6CD1">NuDimon</span>: 
                    I don't like Ludwig or xqc, but I respect the hussle
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #604EBA">roberto91592</span>: 
                    e bi
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #7887DF">Xikmil</span>: 
                    EYE BYE EYE BYE EYE BYE EYE BYE EYE BYE
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #8051AF">Ludasan</span>: 
                    IBAI the GOAT
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #70E580">ixiv16</span>: 
                    no one watches a language they dont understand
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #CF7D4E">Ragamash</span>: 
                    Ibuypower
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #389126">keview70</span>:
                    RACIS 
                </p>
            </div>
        </div>
        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C4665A">Westlove_</span>: 
                    Buy what. who?
                </p>
            </div>
        </div>

        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C4665A">Westlove_</span>: 
                    Buy what. who?
                </p>
            </div>
        </div>

        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C4665A">Westlove_</span>: 
                    Buy what. who?
                </p>
            </div>
        </div>

        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C4665A">Westlove_</span>: 
                    Buy what. who?
                </p>
            </div>
        </div>

        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #C4665A">Westlove_</span>: 
                    Buy what. who?
                </p>
            </div>
        </div>


        <div class="row1">
            <div class="colu1">
                <p>35:02</p> 
            </div>
            <div class="colu2">
                <p class="par1">
                    <span class="userfont" style="color: #6D888E">cap2567</span>: 
                    no shot
                </p>
            </div>
        </div>-->

    </div>
    
    
  </body>
</html>


<script>
    /*colores#EDE95B#C26859#8B6CD1#604EBA#7887DF#8051AF#70E580#CF7D4E#389126#C4665A#C4665A#6D888E*/  
    function randomIntFromInterval(min, max) { // min and max included 
        return Math.floor(Math.random() * (max - min + 1) + min)
    }
    const animals = ["gato", "perro", "conejo", "zorro", "pudu", "leon", "gaviota", "condor", "rata", "puma"];

    const colors = ["#EDE95B", "#C26859", "#8B6CD1", "#604EBA", "#7887DF", "#8051AF", "#70E580", "#CF7D4E", "#389126", "#C4665A"];

    const newel = document.querySelector('#test');

    fetch('https://sms_back.cuy.cl/get_sms.php?timestamp=0', {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
        },
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        data.forEach(post => {

            const num = post.number.split(""); /* del 0 al 11*/
            const username = animals[num[5]];
            const colornick = colors[num[11]];
            const last = num[8] + num[9] + num[10] + num[11];
            console.log(last);
            username.concat(last);
            console.log(colornick);
            console.log(username);

            console.log(num);

            const date = new Date(post.timestamp);
            // Format the date object to a time string in the 'H:i' format with a 24-hour clock format
            const timeString = new Intl.DateTimeFormat('en-US', {
            hour: '2-digit',
            minute: '2-digit',
            hour12: false
            }).format(date);

            console.log(timeString);

            newel.insertAdjacentHTML('beforeend', `
                <div class="row1">
                    <div class="colu1">
                        <p>${timeString}</p> 
                    </div>
                    <div class="colu2">
                        <p class="par1">
                            <span class="userfont" style="color:${colornick}">${username}${last}</span>: 
                            ${post.text}
                        </p>
                    </div>
                </div>
            `)
        });
    })
    
    
</script>